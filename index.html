<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>BookBazaar â€“ Student Book Marketplace</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <div class="brand">ðŸ“š BookBuddies</div>
      <div class="controls">
        <div id="usernameDisplay" class="small">Not signed in</div>

        <div id="userDropdown" class="user-dropdown" style="display: none">
          <button class="btn-ghost" id="userBtn"></button>
          <div class="user-dropdown-content">
            <button id="gotoMyBooks">My Books</button>
            <button id="gotoOrders">My Orders</button>
            <button id="gotoRequests">Requests</button>
            <button id="logoutBtn">Log Out</button>
          </div>
        </div>

        <button class="btn-primary" id="signupBtn">Sign Up</button>
        <button class="btn-primary" id="loginBtn">Log In</button>
        <button class="btn-ghost" id="openSeller">Sell a Book</button>
        <button class="btn-ghost" id="openCart">
          Cart <span id="cartCount" class="cart-count">0</span>
        </button>
      </div>
    </header>

    <main>
      <section>
        <div class="card">
          <h3 style="margin: 0">Available Books</h3>
          <hr />
          <div id="products" class="products"></div>
        </div>
      </section>

      <aside>
        <div class="card">
          <h4 style="margin: 0">Quick Actions</h4>
          <div
            style="
              margin-top: 12px;
              display: flex;
              gap: 8px;
              flex-direction: column;
            "
          >
            <button id="openSellerAside" class="btn-primary">
              Add Book (Sell)
            </button>
            <button id="viewCartAside" class="btn-ghost">Open Cart</button>
          </div>
        </div>
        <div style="height: 12px"></div>
        <div class="card">
          <h4 style="margin: 0">Your Info</h4>
          <div style="margin-top: 12px" id="userInfoCard">
            Please sign in to see account info.
          </div>
        </div>
      </aside>
    </main>

    <footer>
      Made for campus book sharing â€“ demo only. Cart stored locally.
    </footer>

    <!-- Auth Modal -->
    <div id="modalAuth" class="modal-backdrop">
      <div class="modal">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h3 id="authTitle">Sign Up</h3>
          <button id="closeAuth">âœ•</button>
        </div>
        <form id="authForm" style="margin-top: 12px">
          <input type="text" id="authName" placeholder="Username" required />
          <input type="email" id="authEmail" placeholder="Email" required />
          <input
            type="password"
            id="authPass"
            placeholder="Password"
            required
          />
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn-primary" type="submit">Submit</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Seller Modal -->
    <div id="modalSeller" class="modal-backdrop">
      <div class="modal">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h3>Add a Book to Sell</h3>
          <button id="closeSeller">âœ•</button>
        </div>
        <form id="sellerForm" style="margin-top: 10px">
          <input id="bookTitle" placeholder="Book Title" required />
          <input id="bookAuthor" placeholder="Author" />
          <input
            id="bookPrice"
            placeholder="Price (TK)"
            type="number"
            min="1"
            required
          />
          <textarea
            id="bookDesc"
            placeholder="Short description (optional)"
            rows="3"
          ></textarea>
          <label class="small">Book Cover Image (jpg/png, max 1MB)</label>
          <input id="bookImage" type="file" accept="image/*" />
          <div class="small muted" style="margin-top: 4px">
            ðŸ’¡ Tip: Images are stored as Base64. Keep them under 1MB for best
            performance.
          </div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn-primary" type="submit">Add Book</button>
            <button type="button" id="sellerCancel" class="btn-ghost">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Cart Modal -->
    <div id="modalCart" class="modal-backdrop">
      <div class="modal">
        <h3>Your Cart</h3>
        <div id="cartContents" class="cart-list" style="margin-top: 10px"></div>
        <hr />
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <div>Total:</div>
          <div id="cartTotal" style="font-weight: 700">TK 0</div>
        </div>
        <div style="display: flex; gap: 8px; margin-top: 12px">
          <button id="checkoutBtn" class="btn-primary">Place Order</button>
          <button id="clearCartBtn" class="btn-ghost">Clear Cart</button>
        </div>
        <button id="closeCart" style="margin-top: 10px" class="btn-ghost">
          Close
        </button>
      </div>
    </div>

    <!-- Scripts: firebase + app -->
    <script type="module" src="firebase.js"></script>
    <script type="module" src="script.js"></script>
  </body>
</html>
